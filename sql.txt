create user c##tmall identified by "1234";
grant connect, resource to c##tmall;
alter user c##tmall quota 100m on users;

drop table member;
drop table seller;

create table member (
  username varchar2(10 char) primary key,
  password varchar2(60 char),
  email varchar2(30 char),
  join_day date default sysdate,
  birthday date,
  profile varchar2(15 char),
  levels varchar2(15 char),
  order_count number(8) default 0,
  order_amount number(8) default 0
);

create table seller (
  username varchar2(10 char),
  password varchar2(60 char),
  email varchar2(30 char),
  introduction varchar2(200 char),
  join_day date default sysdate,
  levels varchar2(15 char),
  sales_count number(8) default 0,
  sales_amount number(8) default 0,
  activated number(1) default 0,
  check_code varchar2(10)
);

alter table seller add constraint seller_pk_username primary key(username);

create table product (
  pno number(7),
  seller varchar2(10 char),
  name varchar2(50 char),
  info clob,
  price number(7),
  sales_volume number(7),
  sales_amount number(7),
  total_star number(7),
  review_count number(7),
  stock number(7)
);

alter table product add constraint product_pk_pno primary key(pno);

create table product_image (
  ino number(7),
  name varchar2(50 char),
  pno number(7)
);

alter table product_image add constraint product_image_pk_ino primary key(ino);
alter table product_image add constraint product_image_fk_pno foreign key(pno) references product(pno);

create table reviews (
  rno number(7),
  writer varchar2(10 char),
  content varchar2(50 char),
  rating number(7),
  write_time date,
  pno number(7)
);

alter table reviews add constraint reviews_pk_rno primary key(rno);
alter table reviews add constraint reviews_fk_pno foreign key(pno) references product(pno);

